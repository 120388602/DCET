-- Generated by CSharp.lua Compiler
local System = System
local DCETHotfix = DCET.Hotfix
local FairyGUI = FairyGUI
local DCETHotfixCommon
System.import(function (out)
  DCETHotfixCommon = DCET.Hotfix.Common
end)
System.namespace("DCET.Hotfix.Common", function (namespace)
  namespace.class("FUILoadingAwakeSystem", function (namespace)
    local Awake
    Awake = function (this, self, go)
      self:Awake(go)
    end
    return {
      __inherits__ = function (out)
        return {
          out.DCET.Hotfix.AwakeSystem_2(out.DCET.Hotfix.Common.FUILoading, out.FairyGUI.GObject)
        }
      end,
      Awake = Awake
    }
  end)

  namespace.class("FUILoading", function (namespace)
    local CreateGObject, CreateGObjectAsync, CreateInstance, CreateInstanceAsync, Create, GetFormPool, Awake, Dispose, 
    class
    CreateGObject = function ()
      return FairyGUI.UIPackage.CreateObject("Common" --[[FUILoading.UIPackageName]], "Loading" --[[FUILoading.UIResName]])
    end
    CreateGObjectAsync = function (result)
      FairyGUI.UIPackage.CreateObjectAsync("Common" --[[FUILoading.UIPackageName]], "Loading" --[[FUILoading.UIResName]], result)
    end
    CreateInstance = function (domain)
      return DCETHotfix.EntityFactory.Create(domain, CreateGObject(), class, FairyGUI.GObject)
    end
    CreateInstanceAsync = function (domain)
      local tcs = System.TaskCompletionSource()

      CreateGObjectAsync(function (go)
        tcs:SetResult(DCETHotfix.EntityFactory.Create(domain, go, class, FairyGUI.GObject))
      end)

      return tcs:getTask()
    end
    Create = function (domain, go)
      return DCETHotfix.EntityFactory.Create(domain, go, class, FairyGUI.GObject)
    end
    -- <summary>
    -- 通过此方法获取的FUI，在Dispose时不会释放GObject，需要自行管理（一般在配合FGUI的Pool机制时使用）。
    -- </summary>
    GetFormPool = function (domain, go)
      local fui = DCETHotfix.GObjectHelper.Get(go, class)

      if fui == nil then
        fui = Create(domain, go)
      end

      fui.isFromFGUIPool = true

      return fui
    end
    Awake = function (this, go)
      if go == nil then
        return
      end

      this.GObject = go

      if System.String.IsNullOrWhiteSpace(this:getName()) then
        this:setName(this:getId():ToString())
      end

      this.self = System.cast(FairyGUI.GComponent, go)

      DCETHotfix.GObjectHelper.Add(this.self, this)

      local com = go:getasCom()

      if com ~= nil then
        this.bg = System.cast(FairyGUI.GImage, com:GetChild("bg"))
        this.loadingText = System.cast(FairyGUI.GTextField, com:GetChild("loadingText"))
        this.loadingBar = DCETHotfixCommon.FUILoadingProgressBar.Create(this:getDomain(), com:GetChild("loadingBar"))
      end
    end
    Dispose = function (this)
      if this:getIsDisposed() then
        return
      end

      System.base(this).Dispose(this)

      DCETHotfix.GObjectHelper.Remove(this.self)
      this.self = nil
      this.bg = nil
      this.loadingText = nil
      this.loadingBar:Dispose()
      this.loadingBar = nil
    end
    class = {
      __inherits__ = function (out)
        return {
          out.DCET.Hotfix.FUI
        }
      end,
      CreateInstance = CreateInstance,
      CreateInstanceAsync = CreateInstanceAsync,
      Create = Create,
      GetFormPool = GetFormPool,
      Awake = Awake,
      Dispose = Dispose
    }
    return class
  end)
end)
