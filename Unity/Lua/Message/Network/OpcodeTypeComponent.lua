-- Generated by CSharp.lua Compiler
local System = System
local DCETHotfix = DCET.Hotfix
local DCETModel = DCET.Model
local DictUInt16Object = System.Dictionary(System.UInt16, System.Object)
local DoubleMap_2UInt16Type = DCETModel.DoubleMap_2(System.UInt16, System.Type)
System.namespace("DCET.Hotfix", function (namespace)
  namespace.class("OpcodeTypeComponentAwakeSystem", function (namespace)
    local Awake
    Awake = function (this, self)
      self:Load()
    end
    return {
      __inherits__ = function (out)
        return {
          out.DCET.Hotfix.AwakeSystem_1(out.DCET.Hotfix.OpcodeTypeComponent)
        }
      end,
      Awake = Awake
    }
  end)

  namespace.class("OpcodeTypeComponentLoadSystem", function (namespace)
    local Load
    Load = function (this, self)
      self:Load()
    end
    return {
      __inherits__ = function (out)
        return {
          out.DCET.Hotfix.LoadSystem_1(out.DCET.Hotfix.OpcodeTypeComponent)
        }
      end,
      Load = Load
    }
  end)

  namespace.class("OpcodeTypeComponent", function (namespace)
    local Load, GetOpcode, GetType1, GetInstance, Dispose, __ctor__
    __ctor__ = function (this)
      this.opcodeTypes = DoubleMap_2UInt16Type()
      this.typeMessages = DictUInt16Object()
      System.base(this).__ctor__(this)
    end
    Load = function (this)
      this.opcodeTypes:Clear()
      this.typeMessages:Clear()

      local types = DCETHotfix.Game.getEventSystem():GetTypes()
      for _, type in System.each(types) do
        local continue
        repeat
          local attrs = type:GetCustomAttributes(System.typeof(DCETModel.MessageAttribute), false)
          if #attrs == 0 then
            continue = true
            break
          end

          local messageAttribute = System.as(attrs:get(0), DCETModel.MessageAttribute)
          if messageAttribute == nil then
            continue = true
            break
          end
          this.opcodeTypes:Add(messageAttribute:getOpcode(), type)
          this.typeMessages:AddKeyValue(messageAttribute:getOpcode(), System.Activator.CreateInstance(type))
          continue = true
        until 1
        if not continue then
          break
        end
      end
    end
    GetOpcode = function (this, type)
      return this.opcodeTypes:GetKeyByValue(type)
    end
    GetType1 = function (this, opcode)
      return this.opcodeTypes:GetValueByKey(opcode)
    end
    GetInstance = function (this, opcode)
      return this.typeMessages:get(opcode)
    end
    Dispose = function (this)
      if this:getIsDisposed() then
        return
      end

      System.base(this).Dispose(this)
    end
    return {
      __inherits__ = function (out)
        return {
          out.DCET.Hotfix.Entity
        }
      end,
      Load = Load,
      GetOpcode = GetOpcode,
      GetType1 = GetType1,
      GetInstance = GetInstance,
      Dispose = Dispose,
      __ctor__ = __ctor__
    }
  end)
end)
