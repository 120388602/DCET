-- Generated by CSharp.lua Compiler
--[[ Copyright 2010-present MongoDB Inc.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
]]
local System = System
local SystemDynamic = System.Dynamic
local ListObject = System.List(System.Object)
local MongoDBBsonSerialization
local MongoDBSerializers
local DynamicDocumentBaseSerializer_1ExpandoObject
System.import(function (out)
  MongoDBBsonSerialization = MongoDB.Bson.Serialization
  MongoDBSerializers = MongoDB.Bson.Serialization.Serializers
  DynamicDocumentBaseSerializer_1ExpandoObject = MongoDBSerializers.DynamicDocumentBaseSerializer_1(SystemDynamic.ExpandoObject)
end)
System.namespace("MongoDB.Bson.Serialization.Serializers", function (namespace)
  -- <summary>
  -- Serializer for <see cref="ExpandoObject"/>.
  -- </summary>
  -- The use of <see cref="ExpandoObject"/> will serialize any <see cref="List{Object}"/> without type information.
  -- To get the best experience out of using an <see cref="ExpandoObject"/>, any member wanting to be used
  -- as an array should use <see cref="List{Object}"/>.
  -- </remarks>
  namespace.class("ExpandoObjectSerializer", function (namespace)
    local ConfigureDeserializationContext, ConfigureSerializationContext, CreateDocument, SetValueForMember, TryGetValueForMember, __ctor__
    -- <summary>
    -- Initializes a new instance of the <see cref="ExpandoObjectSerializer"/> class.
    -- </summary>
    __ctor__ = function (this)
      DynamicDocumentBaseSerializer_1ExpandoObject.__ctor__(this)
      this._listSerializer = MongoDBBsonSerialization.BsonSerializer.LookupSerializer(ListObject)
    end
    -- <summary>
    -- Configures the deserialization context.
    -- </summary>
    ConfigureDeserializationContext = function (this, builder)
      builder:setDynamicDocumentSerializer(this)
      builder:setDynamicArraySerializer(this._listSerializer)
    end
    -- <summary>
    -- Configures the serialization context.
    -- </summary>
    ConfigureSerializationContext = function (this, builder)
      builder:setIsDynamicType(function (t)
        return t == System.typeof(SystemDynamic.ExpandoObject) or t == System.typeof(ListObject)
      end)
    end
    -- <summary>
    -- Creates the document.
    -- </summary>
    -- A <see cref="ExpandoObject"/>.
    -- </returns>
    CreateDocument = function (this)
      return SystemDynamic.ExpandoObject()
    end
    -- <summary>
    -- Sets the value for the member.
    -- </summary>
    -- <param name="memberName">Name of the member.</param>
    -- <param name="value">The value.</param>
    SetValueForMember = function (this, document, memberName, value)
      document:set(memberName, value)
    end
    -- <summary>
    -- Tries to get the value for a member.  Returns true if the member should be serialized.
    -- </summary>
    -- <param name="memberName">Name of the member.</param>
    -- <param name="memberValue">The member value.</param>
    -- <returns><c>true</c> if the member should be serialized; otherwise <c>false</c>.</returns>
    TryGetValueForMember = function (this, value, memberName, memberValue)
      local default
      default, memberValue = value:TryGetValue(memberName)
      return default, memberValue
    end
    return {
      base = function (out)
        return {
          out.MongoDB.Bson.Serialization.Serializers.DynamicDocumentBaseSerializer_1(System.Dynamic.ExpandoObject)
        }
      end,
      ConfigureDeserializationContext = ConfigureDeserializationContext,
      ConfigureSerializationContext = ConfigureSerializationContext,
      CreateDocument = CreateDocument,
      SetValueForMember = SetValueForMember,
      TryGetValueForMember = TryGetValueForMember,
      __ctor__ = __ctor__
    }
  end)
end)
