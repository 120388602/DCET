-- Generated by CSharp.lua Compiler
local System = System
local GoogleProtobuf = Google.Protobuf
System.namespace("DCET", function (namespace)
  namespace.class("ProtobufHelper", function (namespace)
    local ToBytes, ToStream, FromBytes, FromBytes1, FromStream, FromStream1
    ToBytes = function (message)
      return GoogleProtobuf.MessageExtensions.ToByteArray((System.cast(GoogleProtobuf.IMessage, message)))
    end
    ToStream = function (message, stream)
      GoogleProtobuf.MessageExtensions.WriteTo((System.cast(GoogleProtobuf.IMessage, message)), stream)
    end
    FromBytes = function (type, bytes, index, count)
      local message = System.Activator.CreateInstance(type);
      GoogleProtobuf.MessageExtensions.MergeFrom1((System.cast(GoogleProtobuf.IMessage, message)), bytes, index, count)
      return message
    end
    FromBytes1 = function (instance, bytes, index, count)
      local message = instance;
      GoogleProtobuf.MessageExtensions.MergeFrom1((System.cast(GoogleProtobuf.IMessage, message)), bytes, index, count)
      return message
    end
    FromStream = function (type, stream)
      local message = System.Activator.CreateInstance(type);
      GoogleProtobuf.MessageExtensions.MergeFrom1((System.cast(GoogleProtobuf.IMessage, message)), stream:GetBuffer(), System.toInt32(stream:getPosition()), System.toInt32(stream:getLength()))
      return message
    end
    FromStream1 = function (message, stream)
      -- 这个message可以从池中获取，减少gc
      GoogleProtobuf.MessageExtensions.MergeFrom1((System.cast(GoogleProtobuf.IMessage, message)), stream:GetBuffer(), System.toInt32(stream:getPosition()), System.toInt32(stream:getLength()))
      return message
    end
    return {
      ToBytes = ToBytes,
      ToStream = ToStream,
      FromBytes = FromBytes,
      FromBytes1 = FromBytes1,
      FromStream = FromStream,
      FromStream1 = FromStream1
    }
  end)
end)
